"use strict";(()=>{var e={};e.id=336,e.ids=[336],e.modules={47849:e=>{e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{e.exports=require("pg")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},80207:(e,t,s)=>{s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>c,pages:()=>p,routeModule:()=>m,tree:()=>d});var a=s(50482),r=s(69108),n=s(62563),i=s.n(n),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["dashboard",{children:["transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,98244)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/transactions/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,36542)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,58337)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,82917)),"/home/Frasier/Documents/web/JLSM/jlsm/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/transactions/page.tsx"],c="/dashboard/transactions/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/transactions/page",pathname:"/dashboard/transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98244:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(25036);s(40002);var r=s(23106),n=s(81355),i=s(867),o=s(68582);let l=async()=>{let e=`
        SELECT u1.name AS user_name, u2.name as admin_name, amount, type, timestamp, prev_balance, new_balance FROM transactions t
        JOIN users u1 ON t.user_id = u1.id
        LEFT JOIN users u2 ON t.manual_user_update_id = u2.id
        ORDER BY timestamp DESC 
    `;return(await r.d.query(e)).rows},d=async()=>{let e=await l(),t=await (0,n.getServerSession)(o.Z);return t&&t.user&&!(t.user.privilege<2)?a.jsx("div",{className:"flex flex-col w-full h-full p-8",children:a.jsx("div",{className:"overflow-x-auto w-full rounded-md border-slate-300 border",children:(0,a.jsxs)("table",{className:"w-full divide-y divide-slate-300",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-sm text-slate-400 uppercase",children:[a.jsx("th",{className:"text-start py-2 px-3",children:"User"}),a.jsx("th",{className:"text-start py-2 px-3",children:"Amount transfered"}),a.jsx("th",{className:"text-start py-2 px-3",children:"Type"}),a.jsx("th",{className:"text-start py-2 px-3",children:"Timestamp"}),a.jsx("th",{className:"text-start py-2 px-3",children:"Admin"}),a.jsx("th",{className:"text-start py-2 px-3",children:"Previous Balance"}),a.jsx("th",{className:"text-start py-2 px-3",children:"New Balance"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-300 ",children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"text-sm text-black",children:[a.jsx("td",{className:"text-start py-2 px-3",children:e.user_name}),(0,a.jsxs)("td",{className:"text-start py-2 px-3",children:["$",e.amount/100]}),a.jsx("td",{className:"text-start py-2 px-3",children:e.type}),a.jsx("td",{className:"text-start py-2 px-3",children:e.timestamp.toLocaleString()}),a.jsx("td",{className:"text-start py-2 px-3",children:e.admin_name}),(0,a.jsxs)("td",{className:"text-start py-2 px-3",children:["$",e.prev_balance/100]}),(0,a.jsxs)("td",{className:"text-start py-2 px-3",children:["$",e.new_balance/100]})]},t))})]})})}):(console.error("Unauthorized access in /dashboard/transactions"),(0,i.redirect)("/dashboard"))}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,553,719,534,880],()=>s(80207));module.exports=a})();