(()=>{var e={};e.id=562,e.ids=[562],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},75348:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(50482),a=s(69108),i=s(62563),l=s.n(i),n=s(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["manageclass",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,27765)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/manageclass/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,36542)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,58337)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,82917)),"/home/Frasier/Documents/web/JLSM/jlsm/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/manageclass/page.tsx"],u="/dashboard/manageclass/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/manageclass/page",pathname:"/dashboard/manageclass",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},35952:(e,t,s)=>{Promise.resolve().then(s.bind(s,33224))},33224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(95344),a=s(3729),i=s.n(a),l=s(45352);let n=({setDates:e})=>(0,r.jsxs)("div",{className:"flex flex-row justify-between w-full mb-4",children:[r.jsx(l.E.button,{whileHover:{scale:1.06},onClick:()=>e(e=>e.map(e=>new Date(e.getTime()-6048e5))),className:"w-[30px] h-[30px] flex items-center text-center justify-center rounded-full bg-yellow-500 p-2 text-white",children:"<"}),r.jsx("h3",{children:" Organise Classes "}),r.jsx(l.E.button,{whileHover:{scale:1.06},onClick:()=>e(e=>e.map(e=>new Date(e.getTime()+6048e5))),className:"w-[30px] h-[30px] flex items-center text-center justify-center rounded-full bg-yellow-500 p-2 text-white",children:">"})]});var o=s(342);let c=()=>r.jsx("div",{className:"flex items-center justify-start",children:r.jsx("input",{type:"text",className:"p-3 rounded-full border border-yellow-300 focus:border-none",placeholder:"Search Classes"})}),d=()=>r.jsx(a.Fragment,{children:r.jsx("div",{className:"p-3 text-white rounded-xl bg-gradient-to-r from-yellow-500 to-amber-500",children:"Click the Timetable to add a Class"})}),u=()=>(0,r.jsxs)("div",{className:"w-full flex flex-row items-center justify-between",children:[r.jsx(c,{}),r.jsx(d,{})]}),p=i().createContext(void 0),x=()=>{let e=i().useContext(p);if(void 0===e)throw Error("Please use within a calendar provider");return e},m=({time:e,date:t})=>{let s=x(),a=()=>{s.setExistingClass(!0),s.setShowModal(!0),s.setSelectedTime(e),s.setSelectedDate(t)};return r.jsx("button",{onClick:()=>{a()},className:"w-full h-full hover:bg-black hover:bg-opacity-50 hover:animate-pulse"})};var h=s(73644);let f=["#ff0000","#ff6100","#dee014","#1bd222","#1bd269","#1bd298","#1bcdd2","#1b92d2","#1b4cd2","#331bd2","#6f1bd2","#aa1bd2","#d21bc6","#d21b8e","#d21b1b"],g=()=>{let e=x(),[t,s]=(0,a.useState)([]),[i,n]=(0,a.useState)("-1"),[o,c]=(0,a.useState)("#ffff00"),[d,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[j,w]=(0,a.useState)("");console.log(v);let E=e=>{e.preventDefault(),n(e.target.value),t.forEach(t=>{t.id==e.target.value&&(console.log(t.colour),c(t.colour))})};return(0,a.useEffect)(()=>{(async()=>{let e=await fetch("/api/teachers",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error Fetching Teachers");s(await e.json())})(),m(e.selectedDate.toISOString().split("T")[0]),b(e.selectedDate.toISOString().split("T")[0]),y(e.selectedTime.split(" - ")[0]),w(e.selectedTime.split(" - ")[1])},[e.selectedDate,e.selectedTime]),console.log(p),r.jsx(h.M,{children:e.showModal&&r.jsx(l.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},className:"fixed flex flex-col w-full h-full top-0 left-0 items-center justify-center bg-black bg-opacity-50 p-4",children:(0,r.jsxs)(l.E.div,{exit:{opacity:0,y:-100},initial:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-slate-100 flex flex-col p-5 rounded-xl w-screen md:max-w-[400px] divide-y divide-slate-300",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("h3",{className:"text-lg text-slate-500 font-semibold",children:"Add Class"}),r.jsx("button",{onClick:()=>{e.setShowModal(e=>!e),u(!1),m("")},children:"X"})]}),r.jsx("form",{className:"flex flex-col items-center justify-center gap-2 py-2",children:(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[r.jsx("label",{className:"text-start text-slate-600 text-base",children:"Teacher:"}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-4 justify-between",children:[(0,r.jsxs)("select",{className:"p-3 rounded-xl",value:i,onChange:e=>E(e),children:[r.jsx("option",{selected:!0,disabled:!0,hidden:!0,value:"-1",children:"Select a Teacher"}),t.map((e,t)=>{if(e.privilege<3)return r.jsx("option",{value:e.id,children:e.name},t)})]}),(0,r.jsxs)("div",{className:"inline relative",id:"colourselect",children:[(0,r.jsxs)("div",{onClick:()=>{u(e=>!e)},className:"flex flex-row gap-2 cursor-pointer",children:[r.jsx("div",{className:"rounded-full",style:{backgroundColor:o,height:"30px",width:"30px"}}),r.jsx("p",{children:" ? "})," "]}),r.jsx(h.M,{children:d&&r.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"absolute rounded-xl grid grid-cols-4 shadow gap-4 bg-slate-100 w-[200px] p-2",children:f.map((e,t)=>r.jsx("div",{className:"cursor-pointer rounded-full",onClick:()=>{c(e),u(!1)},style:{backgroundColor:e,height:"30px",width:"30px"}},t))})})]})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 mt-4",children:[r.jsx("input",{type:"date",value:p,onChange:e=>{m(e.target.value)}}),r.jsx("input",{type:"time",value:v,onChange:e=>{y(e.target.value)}})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 mt-4",children:[r.jsx("input",{type:"date",value:g,onChange:e=>{b(e.target.value)}}),r.jsx("input",{type:"time",value:j,onChange:e=>{w(e.target.value)}})]})]})})]},"modal")})})},b=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],v=["08:00 - 09:00","09:00 - 10:00","10:00 - 11:00","11:00 - 12:00","12:00 - 13:00","13:00 - 14:00","14:00 - 15:00","15:00 - 16:00","16:00 - 17:00","17:00 - 18:00","18:00 - 19:00","19:00 - 20:00","20:00 - 21:00","21:00 - 22:00"],y=({weekDates:e,session:t})=>{let[s,i]=(0,a.useState)(e),[l,c]=(0,a.useState)([]),[d,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(s[0]),[w,E]=(0,a.useState)("8:00 - 9:00");return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/classes/getweeklyclasses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start:s[0],end:s[6]})});if(!e.ok)throw Error("There was An Error getting Classes");c(await e.json())}catch(e){console.error(e.message)}})()},[s]),r.jsx(o.B.Provider,{value:t,children:(0,r.jsxs)(p.Provider,{value:{showModal:d,setShowModal:x,existingClass:h,setExistingClass:f,selectedDate:y,setSelectedDate:j,selectedTime:w,setSelectedTime:E},children:[r.jsx(g,{}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx(n,{setDates:i}),r.jsx(u,{}),r.jsx("div",{className:"border border-slate-500 rounded-xl p-4 overflow-auto",children:(0,r.jsxs)("table",{className:"w-full border-b border-slate-300 divide-y divide-slate-300",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{}),s.map((e,t)=>(0,r.jsxs)("th",{className:"text-xs font-semibold text-slate-500 uppercase",children:[r.jsx("p",{children:b[t]}),r.jsx("p",{children:e.toLocaleDateString("en-AU",{timeZone:"UTC"})})]},t))]})}),r.jsx("tbody",{className:"divide-y divide-slate-300",children:v.map((e,t)=>(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-slate-500 border-r border-slate-300 text-sm font-semibold",children:e}),s.map((t,s)=>r.jsx("td",{className:"h-[40px] border-r border-slate-300",children:r.jsx(m,{time:e,date:t})},s))]},t))})]})})]})]})})}},27765:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(25036),a=s(68582);let i=(0,s(86843).createProxy)(String.raw`/home/Frasier/Documents/web/JLSM/jlsm/components/manageclass/TimeTable.tsx`),{__esModule:l,$$typeof:n}=i,o=i.default;var c=s(81355),d=s(867),u=s(40002);let p=()=>{let e=[],t=new Date,s=new Date;(s=new Date(0===t.getDay()?t.getTime()-5184e5:t.getTime()-864e5*t.getDay()+864e5)).setUTCHours(0,0,0,0);for(let t=0;t<7;t++)e.push(new Date(s.getTime()+864e5*t));return e[6].setUTCHours(23,59,59,999),e},x=async()=>{let e=p(),t=await (0,c.getServerSession)(a.Z);return t&&t.user&&!(t.user.privilege<2)?r.jsx(u.Fragment,{children:r.jsx(o,{session:t,weekDates:e})}):(0,d.redirect)("/dashboard")}},73644:(e,t,s)=>{"use strict";s.d(t,{M:()=>f});var r=s(3729),a=s(19038);function i(){let e=(0,r.useRef)(!1);return(0,a.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var l=s(61475),n=s(35986),o=s(40207);class c extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let s=(0,r.useId)(),a=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{let{width:e,height:r,top:l,left:n}=i.current;if(t||!a.current||!e||!r)return;a.current.dataset.motionPopId=s;let o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            top: ${l}px !important;
            left: ${n}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[t]),r.createElement(c,{isPresent:t,childRef:a,sizeRef:i},r.cloneElement(e,{ref:a}))}let u=({children:e,initial:t,isPresent:s,onExitComplete:a,custom:i,presenceAffectsLayout:l,mode:c})=>{let u=(0,o.h)(p),x=(0,r.useId)(),m=(0,r.useMemo)(()=>({id:x,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),l?void 0:[s]);return(0,r.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[s]),r.useEffect(()=>{s||u.size||!a||a()},[s]),"popLayout"===c&&(e=r.createElement(d,{isPresent:s},e)),r.createElement(n.O.Provider,{value:m},e)};function p(){return new Map}var x=s(66828),m=s(87222);let h=e=>e.key||"",f=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:o,presenceAffectsLayout:c=!0,mode:d="sync"})=>{var p;(0,m.k)(!o,"Replace exitBeforeEnter with mode='wait'");let f=(0,r.useContext)(x.p).forceRender||function(){let e=i(),[t,s]=(0,r.useState)(0),a=(0,r.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,r.useCallback)(()=>l.Wi.postRender(a),[a]),t]}()[0],g=i(),b=function(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(e),v=b,y=(0,r.useRef)(new Map).current,j=(0,r.useRef)(v),w=(0,r.useRef)(new Map).current,E=(0,r.useRef)(!0);if((0,a.L)(()=>{E.current=!1,function(e,t){e.forEach(e=>{let s=h(e);t.set(s,e)})}(b,w),j.current=v}),p=()=>{E.current=!0,w.clear(),y.clear()},(0,r.useEffect)(()=>()=>p(),[]),E.current)return r.createElement(r.Fragment,null,v.map(e=>r.createElement(u,{key:h(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:c,mode:d},e)));v=[...v];let C=j.current.map(h),S=b.map(h),N=C.length;for(let e=0;e<N;e++){let t=C[e];-1!==S.indexOf(t)||y.has(t)||y.set(t,void 0)}return"wait"===d&&y.size&&(v=[]),y.forEach((e,s)=>{if(-1!==S.indexOf(s))return;let a=w.get(s);if(!a)return;let i=C.indexOf(s),l=e;l||(l=r.createElement(u,{key:h(a),isPresent:!1,onExitComplete:()=>{y.delete(s);let e=Array.from(w.keys()).filter(e=>!S.includes(e));if(e.forEach(e=>w.delete(e)),j.current=b.filter(t=>{let r=h(t);return r===s||e.includes(r)}),!y.size){if(!1===g.current)return;f(),n&&n()}},custom:t,presenceAffectsLayout:c,mode:d},a),y.set(s,l)),v.splice(i,0,l)}),v=v.map(e=>{let t=e.key;return y.has(t)?e:r.createElement(u,{key:h(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)}),r.createElement(r.Fragment,null,y.size?v:v.map(e=>(0,r.cloneElement)(e)))}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,553,719,534,880],()=>s(75348));module.exports=r})();