(()=>{var e={};e.id=95,e.ids=[95],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},74890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o});var r=s(50482),a=s(69108),i=s(62563),n=s.n(i),l=s(68300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["dashboard",{children:["manage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,95558)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/manage/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,36542)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,58337)),"/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,82917)),"/home/Frasier/Documents/web/JLSM/jlsm/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/Frasier/Documents/web/JLSM/jlsm/app/dashboard/manage/page.tsx"],u="/dashboard/manage/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/manage/page",pathname:"/dashboard/manage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},84772:(e,t,s)=>{Promise.resolve().then(s.bind(s,90626))},90626:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(95344),a=s(89410),i=s(3729),n=s(57895),l=s(73644),c=s(45352);let o=({user:e})=>{let[t,s]=(0,i.useState)(!1),[a,n]=(0,i.useState)(e.privilege),o=()=>{s(!1),u({name:"",balance:""}),n(e.privilege)},[d,u]=(0,i.useState)({name:"",balance:""}),x=async t=>{t.preventDefault();let s=d.name?d.name:e.name,r=d.balance?d.balance:e.balance/100;if(!(await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,name:s,balance:r,privilege:a})})).ok)throw Error("Failed to Update User");window.location.reload()};return(0,r.jsxs)("div",{children:[r.jsx("button",{className:"text-base text-blue-800 hover:text-purple-600  transition ease-in-out duration-500",onClick:()=>s(!0),children:"Edit"}),r.jsx(l.M,{children:t&&r.jsx(c.E.div,{initial:{y:-500},exit:{y:-1e3},animate:{y:0},transition:{stiffness:1e3},className:"fixed  z-20 left-0 top-0 h-full w-full bg-black bg-opacity-50 flex justify-center items-center p-4",children:(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:-100},exit:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-slate-100 rounded-xl divide-y divide-slate-300 flex flex-col shadow-xl p-5 w-screen md:max-w-[400px]",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("h3",{className:"text-lg text-slate-500 font-semibold",children:"Edit User"}),r.jsx("button",{onClick:o,children:"X"})]}),(0,r.jsxs)("form",{onSubmit:e=>x(e),className:"pt-4 flex flex-col space-y-3",children:[r.jsx("label",{className:"text-xs text-slate-400 uppercase",children:"Name"}),r.jsx("input",{value:d.name,onChange:e=>u({...d,name:e.target.value}),className:"p-2 rounded-xl",type:"text",placeholder:e.name?e.name:"No Name given"}),r.jsx("label",{className:"text-xs text-slate-400 uppercase",children:"Balance"}),r.jsx("input",{value:d.balance,onChange:e=>u({...d,balance:e.target.value}),min:"0",step:"0.01",className:"p-2 rounded-xl",type:"number",placeholder:(e.balance/100).toString()}),(0,r.jsxs)("label",{className:"text-xs text-slate-400 uppercase",children:[" ","Role"," "]}),(0,r.jsxs)("select",{value:a,onChange:e=>n(parseInt(e.target.value)),className:"p-2 rounded-xl",children:[r.jsx("option",{value:0,children:"\uD83C\uDF93 Student"}),r.jsx("option",{value:1,children:"\uD83D\uDCDATeacher"}),r.jsx("option",{value:2,children:"\uD83D\uDD10Admin"})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[r.jsx(c.E.button,{whileHover:{scale:1.05},className:"w-20 bg-gradient-to-r from-orange-500 to-yellow-500 text-white p-2 rounded-xl",type:"submit",children:"Save"}),r.jsx(c.E.button,{whileHover:{scale:1.05},onClick:o,className:"w-20 bg-gradient-to-r from-red-600 to-red-500 text-white p-2 rounded-xl",children:"Cancel"})]})]})]})})})]})},d=({id:e,verified:t})=>{let[s,a]=(0,i.useState)(!1),n=()=>{a(!0)},o=async()=>{if(!(await fetch("/api/verify",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,verified:!t})})).ok)throw Error("Failed to change User verification");a(!1),window.location.reload()};return(0,r.jsxs)(i.Fragment,{children:[t?r.jsx(c.E.button,{onClick:n,whileHover:{y:-2},children:r.jsx("div",{className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-green-600",children:"Verified"})}):r.jsx(c.E.button,{onClick:n,whileHover:{y:-2},children:r.jsx("div",{className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-red-600",children:"Not Verified"})}),r.jsx(l.M,{children:s&&r.jsx(c.E.div,{initial:{y:-500},exit:{y:-1e3},animate:{y:0},transition:{stiffness:1e3},className:"fixed bg-black bg-opacity-60 z-20 top-0 left-0 w-full h-full flex justify-center items-center",children:(0,r.jsxs)(c.E.div,{initial:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-slate-100 rounded-xl divide-y divide-slate-300 flex flex-col shadow-xl p-5 w-screen md:max-w-[400px] mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Verify User"}),r.jsx("button",{onClick:()=>a(!1),children:"X"})]}),(0,r.jsxs)("div",{className:"py-8 flex flex-col gap-5",children:[r.jsx("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-black text-center break-words",children:["Are you sure you want to"," ",t?"unverify":"verify"," this user?"]})}),(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[t?r.jsx(c.E.button,{onClick:o,whileHover:{y:-2},className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-slate-500 hover:bg-slate-400 shadow-xl transition ease-in-out",children:"Unverify"}):r.jsx(c.E.button,{whileHover:{y:-2},className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-yellow-500 hover:bg-yellow-400 shadow-xl transition ease-in-out",onClick:o,children:"Verify"}),r.jsx(c.E.button,{whileHover:{y:-2},className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-red-600",onClick:()=>a(!1),children:"Cancel"})]})]})]})})})]})},u=()=>{let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{let e=await fetch("/api/users",{method:"GET"});if(!e.ok)throw Error("Failed to fetch users");t(await e.json())})()},[]),r.jsx("div",{className:"p-4 rounded-xl border border-slate-300 overflow-x-auto hover:bg-white hover:shadow-lg transition ease-in-out duration-500",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"text-start text-xs font-medium text-gray-500 uppercase ",children:"Image"}),r.jsx("th",{scope:"col",className:"text-center text-xs font-medium text-gray-500 uppercase ",children:"Name"}),r.jsx("th",{scope:"col",className:" hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Email"}),r.jsx("th",{scope:"col",className:"hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Balance"}),r.jsx("th",{scope:"col",className:"hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Role"}),r.jsx("th",{scope:"col",className:"hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Verified"}),r.jsx("th",{scope:"col",className:"text-center text-xs font-medium text-gray-500 uppercase ",children:"Edit"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-300",children:e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"py-4 whitespace-nowrap ",children:e.image&&r.jsx(a.default,{src:e.image,alt:"Profile Picture",width:50,height:50,className:"rounded-full"})}),r.jsx("td",{className:"py-4 whitespace-nowrap px-4",children:(0,r.jsxs)("div",{className:"text-sm flex flex-col gap-1 font-medium text-gray-900",children:[(0,r.jsxs)("p",{children:[" ",e.name," "]}),(0,r.jsxs)("p",{className:"lg:hidden text-slate-600",children:[" ",e.email," "]}),(0,r.jsxs)("p",{className:"lg:hidden text-slate-600",children:[" ",0===e.privilege?`$${e.balance/100}`:"N/A"," "]}),r.jsx("div",{className:"lg:hidden",children:r.jsx(n.Z,{privilege:e.privilege,place:0})})]})}),r.jsx("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap px-4",children:r.jsx("div",{className:"text-sm text-center text-gray-500",children:e.email})}),r.jsx("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap px-4",children:r.jsx("div",{className:"text-sm text-gray-500 text-center",children:0===e.privilege?`$${e.balance/100}`:"N/A"})}),r.jsx("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap text-gray-500 px-4",children:r.jsx(n.Z,{privilege:e.privilege,place:1})}),r.jsx("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap text-gray-500 px-4",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(d,{id:parseInt(e.id),verified:e.verified})})}),r.jsx("td",{className:"py-4 whitespace-nowrap px-4 pr-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[r.jsx(o,{user:e}),r.jsx("div",{className:"lg:hidden",children:r.jsx(d,{id:parseInt(e.id),verified:e.verified})})]})})]},e.id))})]})})}},57895:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(95344);s(3729);let a=["bg-yellow-500","bg-cyan-700","bg-red-500","bg-indigo-700"],i=["justify-start","justify-center","justify-end"],n=({privilege:e,place:t})=>r.jsx("div",{className:`flex w-full h-full items-center 
    ${i[t]}
    `,children:r.jsx("div",{className:`py-1 px-3 rounded-full text-white text-center 
    ${a[e]} 

    `,children:0===e?r.jsx("span",{children:"\uD83C\uDF93Student"}):1===e?r.jsx("span",{children:"\uD83C\uDF4ETeacher"}):2===e?r.jsx("span",{children:"\uD83D\uDD10Admin"}):r.jsx("span",{children:"\uD83E\uDD16Dev"})})})},95558:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(25036);s(40002);var a=s(81355),i=s(68582),n=s(867);let l=(0,s(86843).createProxy)(String.raw`/home/Frasier/Documents/web/JLSM/jlsm/components/manage/UserTable.tsx`),{__esModule:c,$$typeof:o}=l,d=l.default,u=async()=>(await (0,a.getServerSession)(i.Z)).user.privilege<2?(0,n.redirect)("/dashboard"):r.jsx("div",{children:r.jsx(d,{})})},73644:(e,t,s)=>{"use strict";s.d(t,{M:()=>f});var r=s(3729),a=s(19038);function i(){let e=(0,r.useRef)(!1);return(0,a.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var n=s(61475),l=s(35986),c=s(40207);class o extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let s=(0,r.useId)(),a=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{let{width:e,height:r,top:n,left:l}=i.current;if(t||!a.current||!e||!r)return;a.current.dataset.motionPopId=s;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            top: ${n}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),r.createElement(o,{isPresent:t,childRef:a,sizeRef:i},r.cloneElement(e,{ref:a}))}let u=({children:e,initial:t,isPresent:s,onExitComplete:a,custom:i,presenceAffectsLayout:n,mode:o})=>{let u=(0,c.h)(x),p=(0,r.useId)(),h=(0,r.useMemo)(()=>({id:p,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),n?void 0:[s]);return(0,r.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[s]),r.useEffect(()=>{s||u.size||!a||a()},[s]),"popLayout"===o&&(e=r.createElement(d,{isPresent:s},e)),r.createElement(l.O.Provider,{value:h},e)};function x(){return new Map}var p=s(66828),h=s(87222);let m=e=>e.key||"",f=({children:e,custom:t,initial:s=!0,onExitComplete:l,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:d="sync"})=>{var x;(0,h.k)(!c,"Replace exitBeforeEnter with mode='wait'");let f=(0,r.useContext)(p.p).forceRender||function(){let e=i(),[t,s]=(0,r.useState)(0),a=(0,r.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,r.useCallback)(()=>n.Wi.postRender(a),[a]),t]}()[0],g=i(),y=function(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(e),v=y,j=(0,r.useRef)(new Map).current,b=(0,r.useRef)(v),w=(0,r.useRef)(new Map).current,N=(0,r.useRef)(!0);if((0,a.L)(()=>{N.current=!1,function(e,t){e.forEach(e=>{let s=m(e);t.set(s,e)})}(y,w),b.current=v}),x=()=>{N.current=!0,w.clear(),j.clear()},(0,r.useEffect)(()=>()=>x(),[]),N.current)return r.createElement(r.Fragment,null,v.map(e=>r.createElement(u,{key:m(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:o,mode:d},e)));v=[...v];let E=b.current.map(m),P=y.map(m),C=E.length;for(let e=0;e<C;e++){let t=E[e];-1!==P.indexOf(t)||j.has(t)||j.set(t,void 0)}return"wait"===d&&j.size&&(v=[]),j.forEach((e,s)=>{if(-1!==P.indexOf(s))return;let a=w.get(s);if(!a)return;let i=E.indexOf(s),n=e;n||(n=r.createElement(u,{key:m(a),isPresent:!1,onExitComplete:()=>{j.delete(s);let e=Array.from(w.keys()).filter(e=>!P.includes(e));if(e.forEach(e=>w.delete(e)),b.current=y.filter(t=>{let r=m(t);return r===s||e.includes(r)}),!j.size){if(!1===g.current)return;f(),l&&l()}},custom:t,presenceAffectsLayout:o,mode:d},a),j.set(s,n)),v.splice(i,0,n)}),v=v.map(e=>{let t=e.key;return j.has(t)?e:r.createElement(u,{key:m(e),isPresent:!0,presenceAffectsLayout:o,mode:d},e)}),r.createElement(r.Fragment,null,j.size?v:v.map(e=>(0,r.cloneElement)(e)))}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,553,719,534,880],()=>s(74890));module.exports=r})();