(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{1280:function(e,t,s){Promise.resolve().then(s.bind(s,908))},908:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(3827),l=s(4090),a=s(7191),n=e=>{let{setDates:t}=e;return(0,r.jsxs)("div",{className:"flex flex-row justify-between w-full mb-4",children:[(0,r.jsx)(a.E.button,{whileHover:{scale:1.06},onClick:()=>t(e=>e.map(e=>new Date(e.getTime()-6048e5))),className:"w-[30px] h-[30px] flex items-center text-center justify-center rounded-full bg-yellow-500 p-2 text-white",children:"<"}),(0,r.jsx)("h3",{children:" Organise Classes "}),(0,r.jsx)(a.E.button,{whileHover:{scale:1.06},onClick:()=>t(e=>e.map(e=>new Date(e.getTime()+6048e5))),className:"w-[30px] h-[30px] flex items-center text-center justify-center rounded-full bg-yellow-500 p-2 text-white",children:">"})]})},i=s(7715),o=()=>(0,r.jsx)("div",{className:"flex items-center justify-start",children:(0,r.jsx)("input",{type:"text",className:"p-3 rounded-full border border-yellow-300 focus:border-none",placeholder:"Search Classes"})}),c=()=>(0,r.jsx)(l.Fragment,{children:(0,r.jsx)("div",{className:"p-3 text-white rounded-xl bg-gradient-to-r from-yellow-500 to-amber-500",children:"Click the Timetable to add a Class"})}),d=()=>(0,r.jsxs)("div",{className:"w-full flex flex-row items-center justify-between",children:[(0,r.jsx)(o,{}),(0,r.jsx)(c,{})]});let u=l.createContext(void 0),f=()=>{let e=l.useContext(u);if(void 0===e)throw Error("Please use within a calendar provider");return e};var h=e=>{let{time:t,date:s}=e,l=f(),a=()=>{l.setExistingClass(!0),l.setShowModal(!0),l.setSelectedTime(t),l.setSelectedDate(s)};return(0,r.jsx)("button",{onClick:()=>{a()},className:"w-full h-full hover:bg-black hover:bg-opacity-50 hover:animate-pulse"})},p=s(1348);let x=["#ff0000","#ff6100","#dee014","#1bd222","#1bd269","#1bd298","#1bcdd2","#1b92d2","#1b4cd2","#331bd2","#6f1bd2","#aa1bd2","#d21bc6","#d21b8e","#d21b1b"];var m=()=>{let e=f(),[t,s]=(0,l.useState)([]),[n,i]=(0,l.useState)("-1"),[o,c]=(0,l.useState)("#ffff00"),[d,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[y,b]=(0,l.useState)(""),[g,w]=(0,l.useState)("");console.log(y);let E=e=>{e.preventDefault(),i(e.target.value),t.forEach(t=>{t.id==e.target.value&&(console.log(t.colour),c(t.colour))})};return(0,l.useEffect)(()=>{(async()=>{let e=await fetch("/api/teachers",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error Fetching Teachers");s(await e.json())})(),m(e.selectedDate.toISOString().split("T")[0]),j(e.selectedDate.toISOString().split("T")[0]),b(e.selectedTime.split(" - ")[0]),w(e.selectedTime.split(" - ")[1])},[e.selectedDate,e.selectedTime]),console.log(h),(0,r.jsx)(p.M,{children:e.showModal&&(0,r.jsx)(a.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},className:"fixed flex flex-col w-full h-full top-0 left-0 items-center justify-center bg-black bg-opacity-50 p-4",children:(0,r.jsxs)(a.E.div,{exit:{opacity:0,y:-100},initial:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-slate-100 flex flex-col p-5 rounded-xl w-screen md:max-w-[400px] divide-y divide-slate-300",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h3",{className:"text-lg text-slate-500 font-semibold",children:"Add Class"}),(0,r.jsx)("button",{onClick:()=>{e.setShowModal(e=>!e),u(!1),m("")},children:"X"})]}),(0,r.jsx)("form",{className:"flex flex-col items-center justify-center gap-2 py-2",children:(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,r.jsx)("label",{className:"text-start text-slate-600 text-base",children:"Teacher:"}),(0,r.jsxs)("div",{className:"flex flex-row items-center gap-4 justify-between",children:[(0,r.jsxs)("select",{className:"p-3 rounded-xl",value:n,onChange:e=>E(e),children:[(0,r.jsx)("option",{selected:!0,disabled:!0,hidden:!0,value:"-1",children:"Select a Teacher"}),t.map((e,t)=>{if(e.privilege<3)return(0,r.jsx)("option",{value:e.id,children:e.name},t)})]}),(0,r.jsxs)("div",{className:"inline relative",id:"colourselect",children:[(0,r.jsxs)("div",{onClick:()=>{u(e=>!e)},className:"flex flex-row gap-2 cursor-pointer",children:[(0,r.jsx)("div",{className:"rounded-full",style:{backgroundColor:o,height:"30px",width:"30px"}}),(0,r.jsx)("p",{children:" ? "})," "]}),(0,r.jsx)(p.M,{children:d&&(0,r.jsx)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},className:"absolute rounded-xl grid grid-cols-4 shadow gap-4 bg-slate-100 w-[200px] p-2",children:x.map((e,t)=>(0,r.jsx)("div",{className:"cursor-pointer rounded-full",onClick:()=>{c(e),u(!1)},style:{backgroundColor:e,height:"30px",width:"30px"}},t))})})]})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 mt-4",children:[(0,r.jsx)("input",{type:"date",value:h,onChange:e=>{m(e.target.value)}}),(0,r.jsx)("input",{type:"time",value:y,onChange:e=>{b(e.target.value)}})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 mt-4",children:[(0,r.jsx)("input",{type:"date",value:v,onChange:e=>{j(e.target.value)}}),(0,r.jsx)("input",{type:"time",value:g,onChange:e=>{w(e.target.value)}})]})]})})]},"modal")})})};let v=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],j=["08:00 - 09:00","09:00 - 10:00","10:00 - 11:00","11:00 - 12:00","12:00 - 13:00","13:00 - 14:00","14:00 - 15:00","15:00 - 16:00","16:00 - 17:00","17:00 - 18:00","18:00 - 19:00","19:00 - 20:00","20:00 - 21:00","21:00 - 22:00"];var y=e=>{let{weekDates:t,session:s}=e,[a,o]=(0,l.useState)(t),[c,f]=(0,l.useState)([]),[p,x]=(0,l.useState)(!1),[y,b]=(0,l.useState)(!1),[g,w]=(0,l.useState)(a[0]),[E,C]=(0,l.useState)("8:00 - 9:00");return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/classes/getweeklyclasses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start:a[0],end:a[6]})});if(!e.ok)throw Error("There was An Error getting Classes");f(await e.json())}catch(e){console.error(e.message)}})()},[a]),(0,r.jsx)(i.B.Provider,{value:s,children:(0,r.jsxs)(u.Provider,{value:{showModal:p,setShowModal:x,existingClass:y,setExistingClass:b,selectedDate:g,setSelectedDate:w,selectedTime:E,setSelectedTime:C},children:[(0,r.jsx)(m,{}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(n,{setDates:o}),(0,r.jsx)(d,{}),(0,r.jsx)("div",{className:"border border-slate-500 rounded-xl p-4 overflow-auto",children:(0,r.jsxs)("table",{className:"w-full border-b border-slate-300 divide-y divide-slate-300",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{}),a.map((e,t)=>(0,r.jsxs)("th",{className:"text-xs font-semibold text-slate-500 uppercase",children:[(0,r.jsx)("p",{children:v[t]}),(0,r.jsx)("p",{children:e.toLocaleDateString("en-AU",{timeZone:"UTC"})})]},t))]})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-300",children:j.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-slate-500 border-r border-slate-300 text-sm font-semibold",children:e}),a.map((t,s)=>(0,r.jsx)("td",{className:"h-[40px] border-r border-slate-300",children:(0,r.jsx)(h,{time:e,date:t})},s))]},t))})]})})]})]})})}},7715:function(e,t,s){"use strict";s.d(t,{B:function(){return l},l:function(){return a}});var r=s(4090);let l=(0,r.createContext)(void 0),a=()=>{let e=(0,r.useContext)(l);if(void 0===e||void 0===e.user)throw Error("Please use within a session provider");return e}},1348:function(e,t,s){"use strict";s.d(t,{M:function(){return m}});var r=s(4090),l=s(5526);function a(){let e=(0,r.useRef)(!1);return(0,l.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var n=s(4205),i=s(4561),o=s(2435);class c extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:s}=e,l=(0,r.useId)(),a=(0,r.useRef)(null),n=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:i}=n.current;if(s||!a.current||!e||!t)return;a.current.dataset.motionPopId=l;let o=document.createElement("style");return document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[s]),r.createElement(c,{isPresent:s,childRef:a,sizeRef:n},r.cloneElement(t,{ref:a}))}let u=e=>{let{children:t,initial:s,isPresent:l,onExitComplete:a,custom:n,presenceAffectsLayout:c,mode:u}=e,h=(0,o.h)(f),p=(0,r.useId)(),x=(0,r.useMemo)(()=>({id:p,initial:s,isPresent:l,custom:n,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;a&&a()},register:e=>(h.set(e,!1),()=>h.delete(e))}),c?void 0:[l]);return(0,r.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[l]),r.useEffect(()=>{l||h.size||!a||a()},[l]),"popLayout"===u&&(t=r.createElement(d,{isPresent:l},t)),r.createElement(i.O.Provider,{value:x},t)};function f(){return new Map}var h=s(3856),p=s(9908);let x=e=>e.key||"",m=e=>{var t;let{children:s,custom:i,initial:o=!0,onExitComplete:c,exitBeforeEnter:d,presenceAffectsLayout:f=!0,mode:m="sync"}=e;(0,p.k)(!d,"Replace exitBeforeEnter with mode='wait'");let v=(0,r.useContext)(h.p).forceRender||function(){let e=a(),[t,s]=(0,r.useState)(0),l=(0,r.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,r.useCallback)(()=>n.Wi.postRender(l),[l]),t]}()[0],j=a(),y=function(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(s),b=y,g=(0,r.useRef)(new Map).current,w=(0,r.useRef)(b),E=(0,r.useRef)(new Map).current,C=(0,r.useRef)(!0);if((0,l.L)(()=>{C.current=!1,function(e,t){e.forEach(e=>{let s=x(e);t.set(s,e)})}(y,E),w.current=b}),t=()=>{C.current=!0,E.clear(),g.clear()},(0,r.useEffect)(()=>()=>t(),[]),C.current)return r.createElement(r.Fragment,null,b.map(e=>r.createElement(u,{key:x(e),isPresent:!0,initial:!!o&&void 0,presenceAffectsLayout:f,mode:m},e)));b=[...b];let N=w.current.map(x),S=y.map(x),k=N.length;for(let e=0;e<k;e++){let t=N[e];-1!==S.indexOf(t)||g.has(t)||g.set(t,void 0)}return"wait"===m&&g.size&&(b=[]),g.forEach((e,t)=>{if(-1!==S.indexOf(t))return;let s=E.get(t);if(!s)return;let l=N.indexOf(t),a=e;a||(a=r.createElement(u,{key:x(s),isPresent:!1,onExitComplete:()=>{g.delete(t);let e=Array.from(E.keys()).filter(e=>!S.includes(e));if(e.forEach(e=>E.delete(e)),w.current=y.filter(s=>{let r=x(s);return r===t||e.includes(r)}),!g.size){if(!1===j.current)return;v(),c&&c()}},custom:i,presenceAffectsLayout:f,mode:m},s),g.set(t,a)),b.splice(l,0,a)}),b=b.map(e=>{let t=e.key;return g.has(t)?e:r.createElement(u,{key:x(e),isPresent:!0,presenceAffectsLayout:f,mode:m},e)}),r.createElement(r.Fragment,null,g.size?b:b.map(e=>(0,r.cloneElement)(e)))}}},function(e){e.O(0,[191,971,69,744],function(){return e(e.s=1280)}),_N_E=e.O()}]);