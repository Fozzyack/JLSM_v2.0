(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{6334:function(e,t,s){Promise.resolve().then(s.bind(s,7289))},7289:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var l=s(3827),n=s(703),a=s(4090),i=s(3516),r=s(1348),c=s(7191),d=e=>{let{user:t}=e,[s,n]=(0,a.useState)(!1),[i,d]=(0,a.useState)(t.privilege),o=()=>{n(!1),u({name:"",balance:""}),d(t.privilege)},[x,u]=(0,a.useState)({name:"",balance:""}),p=async e=>{e.preventDefault();let s=x.name?x.name:t.name,l=x.balance?x.balance:t.balance/100;if(!(await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,name:s,balance:l,privilege:i})})).ok)throw Error("Failed to Update User");window.location.reload()};return(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{className:"text-base text-blue-800 hover:text-purple-600  transition ease-in-out duration-500",onClick:()=>n(!0),children:"Edit"}),(0,l.jsx)(r.M,{children:s&&(0,l.jsx)(c.E.div,{initial:{y:-500},exit:{y:-1e3},animate:{y:0},transition:{stiffness:1e3},className:"fixed  z-20 left-0 top-0 h-full w-full bg-black bg-opacity-50 flex justify-center items-center p-4",children:(0,l.jsxs)(c.E.div,{initial:{opacity:0,y:-100},exit:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-slate-100 rounded-xl divide-y divide-slate-300 flex flex-col shadow-xl p-5 w-screen md:max-w-[400px]",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("h3",{className:"text-lg text-slate-500 font-semibold",children:"Edit User"}),(0,l.jsx)("button",{onClick:o,children:"X"})]}),(0,l.jsxs)("form",{onSubmit:e=>p(e),className:"pt-4 flex flex-col space-y-3",children:[(0,l.jsx)("label",{className:"text-xs text-slate-400 uppercase",children:"Name"}),(0,l.jsx)("input",{value:x.name,onChange:e=>u({...x,name:e.target.value}),className:"p-2 rounded-xl",type:"text",placeholder:t.name?t.name:"No Name given"}),(0,l.jsx)("label",{className:"text-xs text-slate-400 uppercase",children:"Balance"}),(0,l.jsx)("input",{value:x.balance,onChange:e=>u({...x,balance:e.target.value}),min:"0",step:"0.01",className:"p-2 rounded-xl",type:"number",placeholder:(t.balance/100).toString()}),(0,l.jsxs)("label",{className:"text-xs text-slate-400 uppercase",children:[" ","Role"," "]}),(0,l.jsxs)("select",{value:i,onChange:e=>d(parseInt(e.target.value)),className:"p-2 rounded-xl",children:[(0,l.jsx)("option",{value:0,children:"\uD83C\uDF93 Student"}),(0,l.jsx)("option",{value:1,children:"\uD83D\uDCDATeacher"}),(0,l.jsx)("option",{value:2,children:"\uD83D\uDD10Admin"})]}),(0,l.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,l.jsx)(c.E.button,{whileHover:{scale:1.05},className:"w-20 bg-gradient-to-r from-orange-500 to-yellow-500 text-white p-2 rounded-xl",type:"submit",children:"Save"}),(0,l.jsx)(c.E.button,{whileHover:{scale:1.05},onClick:o,className:"w-20 bg-gradient-to-r from-red-600 to-red-500 text-white p-2 rounded-xl",children:"Cancel"})]})]})]})})})]})},o=e=>{let{id:t,verified:s}=e,[n,i]=(0,a.useState)(!1),d=()=>{i(!0)},o=async()=>{if(!(await fetch("/api/verify",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,verified:!s})})).ok)throw Error("Failed to change User verification");i(!1),window.location.reload()};return(0,l.jsxs)(a.Fragment,{children:[s?(0,l.jsx)(c.E.button,{onClick:d,whileHover:{y:-2},children:(0,l.jsx)("div",{className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-green-600",children:"Verified"})}):(0,l.jsx)(c.E.button,{onClick:d,whileHover:{y:-2},children:(0,l.jsx)("div",{className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-red-600",children:"Not Verified"})}),(0,l.jsx)(r.M,{children:n&&(0,l.jsx)(c.E.div,{initial:{y:-500},exit:{y:-1e3},animate:{y:0},transition:{stiffness:1e3},className:"fixed bg-black bg-opacity-60 z-20 top-0 left-0 w-full h-full flex justify-center items-center",children:(0,l.jsxs)(c.E.div,{initial:{opacity:0,y:-100},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-slate-100 rounded-xl divide-y divide-slate-300 flex flex-col shadow-xl p-5 w-screen md:max-w-[400px] mx-4",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Verify User"}),(0,l.jsx)("button",{onClick:()=>i(!1),children:"X"})]}),(0,l.jsxs)("div",{className:"py-8 flex flex-col gap-5",children:[(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("p",{className:"text-black text-center break-words",children:["Are you sure you want to"," ",s?"unverify":"verify"," this user?"]})}),(0,l.jsxs)("div",{className:"flex justify-center gap-2",children:[s?(0,l.jsx)(c.E.button,{onClick:o,whileHover:{y:-2},className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-slate-500 hover:bg-slate-400 shadow-xl transition ease-in-out",children:"Unverify"}):(0,l.jsx)(c.E.button,{whileHover:{y:-2},className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-yellow-500 hover:bg-yellow-400 shadow-xl transition ease-in-out",onClick:o,children:"Verify"}),(0,l.jsx)(c.E.button,{whileHover:{y:-2},className:"py-1 px-3 w-[120px] rounded-full text-white text-center bg-red-600",onClick:()=>i(!1),children:"Cancel"})]})]})]})})})]})},x=()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{let e=await fetch("/api/users",{method:"GET"});if(!e.ok)throw Error("Failed to fetch users");t(await e.json())})()},[]),(0,l.jsx)("div",{className:"p-4 rounded-xl border border-slate-300 overflow-x-auto hover:bg-white hover:shadow-lg transition ease-in-out duration-500",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"text-start text-xs font-medium text-gray-500 uppercase ",children:"Image"}),(0,l.jsx)("th",{scope:"col",className:"text-center text-xs font-medium text-gray-500 uppercase ",children:"Name"}),(0,l.jsx)("th",{scope:"col",className:" hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Email"}),(0,l.jsx)("th",{scope:"col",className:"hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Balance"}),(0,l.jsx)("th",{scope:"col",className:"hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Role"}),(0,l.jsx)("th",{scope:"col",className:"hidden lg:table-cell text-center text-xs font-medium text-gray-500 uppercase ",children:"Verified"}),(0,l.jsx)("th",{scope:"col",className:"text-center text-xs font-medium text-gray-500 uppercase ",children:"Edit"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-300",children:e.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-4 whitespace-nowrap ",children:e.image&&(0,l.jsx)(n.default,{src:e.image,alt:"Profile Picture",width:50,height:50,className:"rounded-full"})}),(0,l.jsx)("td",{className:"py-4 whitespace-nowrap px-4",children:(0,l.jsxs)("div",{className:"text-sm flex flex-col gap-1 font-medium text-gray-900",children:[(0,l.jsxs)("p",{children:[" ",e.name," "]}),(0,l.jsxs)("p",{className:"lg:hidden text-slate-600",children:[" ",e.email," "]}),(0,l.jsxs)("p",{className:"lg:hidden text-slate-600",children:[" ",0===e.privilege?"$".concat(e.balance/100):"N/A"," "]}),(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(i.Z,{privilege:e.privilege,place:0})})]})}),(0,l.jsx)("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap px-4",children:(0,l.jsx)("div",{className:"text-sm text-center text-gray-500",children:e.email})}),(0,l.jsx)("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap px-4",children:(0,l.jsx)("div",{className:"text-sm text-gray-500 text-center",children:0===e.privilege?"$".concat(e.balance/100):"N/A"})}),(0,l.jsx)("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap text-gray-500 px-4",children:(0,l.jsx)(i.Z,{privilege:e.privilege,place:1})}),(0,l.jsx)("td",{className:"hidden lg:table-cell py-4 whitespace-nowrap text-gray-500 px-4",children:(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(o,{id:parseInt(e.id),verified:e.verified})})}),(0,l.jsx)("td",{className:"py-4 whitespace-nowrap px-4 pr-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)(d,{user:e}),(0,l.jsx)("div",{className:"lg:hidden",children:(0,l.jsx)(o,{id:parseInt(e.id),verified:e.verified})})]})})]},e.id))})]})})}},3516:function(e,t,s){"use strict";var l=s(3827);s(4090);let n=["bg-yellow-500","bg-cyan-700","bg-red-500","bg-indigo-700"],a=["justify-start","justify-center","justify-end"];t.Z=e=>{let{privilege:t,place:s}=e;return(0,l.jsx)("div",{className:"flex w-full h-full items-center \n    ".concat(a[s],"\n    "),children:(0,l.jsx)("div",{className:"py-1 px-3 rounded-full text-white text-center \n    ".concat(n[t]," \n\n    "),children:0===t?(0,l.jsx)("span",{children:"\uD83C\uDF93Student"}):1===t?(0,l.jsx)("span",{children:"\uD83C\uDF4ETeacher"}):2===t?(0,l.jsx)("span",{children:"\uD83D\uDD10Admin"}):(0,l.jsx)("span",{children:"\uD83E\uDD16Dev"})})})}},1348:function(e,t,s){"use strict";s.d(t,{M:function(){return m}});var l=s(4090),n=s(5526);function a(){let e=(0,l.useRef)(!1);return(0,n.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var i=s(4205),r=s(4561),c=s(2435);class d extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function o(e){let{children:t,isPresent:s}=e,n=(0,l.useId)(),a=(0,l.useRef)(null),i=(0,l.useRef)({width:0,height:0,top:0,left:0});return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:l,left:r}=i.current;if(s||!a.current||!e||!t)return;a.current.dataset.motionPopId=n;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(l,"px !important;\n            left: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[s]),l.createElement(d,{isPresent:s,childRef:a,sizeRef:i},l.cloneElement(t,{ref:a}))}let x=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:a,custom:i,presenceAffectsLayout:d,mode:x}=e,p=(0,c.h)(u),h=(0,l.useId)(),f=(0,l.useMemo)(()=>({id:h,initial:s,isPresent:n,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;a&&a()},register:e=>(p.set(e,!1),()=>p.delete(e))}),d?void 0:[n]);return(0,l.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[n]),l.useEffect(()=>{n||p.size||!a||a()},[n]),"popLayout"===x&&(t=l.createElement(o,{isPresent:n},t)),l.createElement(r.O.Provider,{value:f},t)};function u(){return new Map}var p=s(3856),h=s(9908);let f=e=>e.key||"",m=e=>{var t;let{children:s,custom:r,initial:c=!0,onExitComplete:d,exitBeforeEnter:o,presenceAffectsLayout:u=!0,mode:m="sync"}=e;(0,h.k)(!o,"Replace exitBeforeEnter with mode='wait'");let y=(0,l.useContext)(p.p).forceRender||function(){let e=a(),[t,s]=(0,l.useState)(0),n=(0,l.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,l.useCallback)(()=>i.Wi.postRender(n),[n]),t]}()[0],j=a(),g=function(e){let t=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&t.push(e)}),t}(s),v=g,w=(0,l.useRef)(new Map).current,b=(0,l.useRef)(v),N=(0,l.useRef)(new Map).current,E=(0,l.useRef)(!0);if((0,n.L)(()=>{E.current=!1,function(e,t){e.forEach(e=>{let s=f(e);t.set(s,e)})}(g,N),b.current=v}),t=()=>{E.current=!0,N.clear(),w.clear()},(0,l.useEffect)(()=>()=>t(),[]),E.current)return l.createElement(l.Fragment,null,v.map(e=>l.createElement(x,{key:f(e),isPresent:!0,initial:!!c&&void 0,presenceAffectsLayout:u,mode:m},e)));v=[...v];let C=b.current.map(f),k=g.map(f),D=C.length;for(let e=0;e<D;e++){let t=C[e];-1!==k.indexOf(t)||w.has(t)||w.set(t,void 0)}return"wait"===m&&w.size&&(v=[]),w.forEach((e,t)=>{if(-1!==k.indexOf(t))return;let s=N.get(t);if(!s)return;let n=C.indexOf(t),a=e;a||(a=l.createElement(x,{key:f(s),isPresent:!1,onExitComplete:()=>{w.delete(t);let e=Array.from(N.keys()).filter(e=>!k.includes(e));if(e.forEach(e=>N.delete(e)),b.current=g.filter(s=>{let l=f(s);return l===t||e.includes(l)}),!w.size){if(!1===j.current)return;y(),d&&d()}},custom:r,presenceAffectsLayout:u,mode:m},s),w.set(t,a)),v.splice(n,0,a)}),v=v.map(e=>{let t=e.key;return w.has(t)?e:l.createElement(x,{key:f(e),isPresent:!0,presenceAffectsLayout:u,mode:m},e)}),l.createElement(l.Fragment,null,w.size?v:v.map(e=>(0,l.cloneElement)(e)))}}},function(e){e.O(0,[191,703,971,69,744],function(){return e(e.s=6334)}),_N_E=e.O()}]);